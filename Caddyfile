:8080 {
    # Studio UI at /ui
    handle /ui* {
        uri strip_prefix /ui
        reverse_proxy localhost:18488
    }

    # WebSocket connections (auto-detected by upgrade header)
    @websocket {
        header Connection *Upgrade*
        header Upgrade websocket
    }
    handle @websocket {
        reverse_proxy localhost:8900
    }

    # Everything else goes to RPC (root path = RPC)
    handle /* {
        reverse_proxy localhost:8899
    }
}
